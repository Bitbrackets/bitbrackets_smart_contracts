<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for contracts/BbStorage.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">contracts/</a> BbStorage.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">47.06% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>8/17</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">25% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>1/4</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">34.78% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>8/23</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">36% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>9/25</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">98×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">112×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">pragma solidity ^0.4.19;
&nbsp;
&nbsp;
/// @title Eternal Storage for Bit Brackets Contracts
/// inspired by the awesome RocketPool project and Eternal Storage implementations
/// @author Doug Molina
contract BbStorage {
&nbsp;
    /**** Storage Types *******/
  
    mapping(bytes32 =&gt; string)     private stringStorage;
    mapping(bytes32 =&gt; address)    private addressStorage;
    mapping(bytes32 =&gt; bytes)      private bytesStorage;
    mapping(bytes32 =&gt; bool)       private boolStorage;
    mapping(bytes32 =&gt; int256)     private intStorage;
    mapping(bytes32 =&gt; uint256)    private uIntStorage;
    mapping(bytes32 =&gt; uint8[100])     private int8ArrayStorage; 
&nbsp;
&nbsp;
    /*** Modifiers ************/
&nbsp;
    /// @dev Only allow access from the Bit Brackets contracts
    modifier onlyBitBracketsContract() {
        // The owner and other contracts are only allowed to set the storage upon deployment to register the initial contracts/settings, afterwards their direct access is disabled
        <span class="missing-if-branch" title="if path not taken" >I</span>if (boolStorage[keccak256("contract.storage.initialised")] == true) {
            // Make sure the access is permitted to only contracts in our control
<span class="cstat-no" title="statement not covered" >            require(addressStorage[keccak256("contract.address", msg.sender)] != 0x0)</span>;
        }
        _;
    }
&nbsp;
&nbsp;
    /// @dev constructor
    function BbStorage() public {
        // Set the main owner upon deployment
        // TODO implement ownable using access.role to allow admins
        boolStorage[keccak256("access.role", "owner", msg.sender)] = true;
    }
&nbsp;
&nbsp;
    /**** Get Methods ***********/
   
    /// @param _key The key for the record
    function getAddress(bytes32 _key) external view returns (address) {
        return addressStorage[_key];
    }
&nbsp;
    /// @param _key The key for the record
    function getUint(bytes32 _key) external view returns (uint) {
        return uIntStorage[_key];
    }
&nbsp;
    /// @param _key The key for the record
<span class="fstat-no" title="function not covered" >    function getString(bytes32 _key) external view returns (string</span>) {
<span class="cstat-no" title="statement not covered" >        return stringStorage[_key];</span>
    }
&nbsp;
    /// @param _key The key for the record
<span class="fstat-no" title="function not covered" >    function getBytes(bytes32 _key) external view returns (bytes</span>) {
<span class="cstat-no" title="statement not covered" >        return bytesStorage[_key];</span>
    }
&nbsp;
    /// @param _key The key for the record
    function getBool(bytes32 _key) external view returns (bool) {
        return boolStorage[_key];
    }
&nbsp;
    /// @param _key The key for the record
<span class="fstat-no" title="function not covered" >    function getInt(bytes32 _key) external view returns (int</span>) {
<span class="cstat-no" title="statement not covered" >        return intStorage[_key];</span>
    }
&nbsp;
    /// @param _key The key for the record
    function getInt8Array(bytes32 _key) external view returns (uint8[100]) {
        return int8ArrayStorage[_key];
    }
&nbsp;
    /**** Set Methods ***********/
&nbsp;
    /// @param _key The key for the record
<span class="fstat-no" title="function not covered" >    function setAddress(bytes32 _key, address _value) external onlyBitBracketsContrac</span>t {
<span class="cstat-no" title="statement not covered" >        addressStorage[_key] = _value</span>;
    }
&nbsp;
    /// @param _key The key for the record
    function setUint(bytes32 _key, uint _value) external onlyBitBracketsContract {
        uIntStorage[_key] = _value;
    }
&nbsp;
    /// @param _key The key for the record
<span class="fstat-no" title="function not covered" >    function setString(bytes32 _key, string _value) external onlyBitBracketsContrac</span>t {
<span class="cstat-no" title="statement not covered" >        stringStorage[_key] = _value</span>;
    }
&nbsp;
    /// @param _key The key for the record
<span class="fstat-no" title="function not covered" >    function setBytes(bytes32 _key, bytes _value) external onlyBitBracketsContrac</span>t {
<span class="cstat-no" title="statement not covered" >        bytesStorage[_key] = _value</span>;
    }
    
    /// @param _key The key for the record
<span class="fstat-no" title="function not covered" >    function setBool(bytes32 _key, bool _value) external onlyBitBracketsContrac</span>t {
<span class="cstat-no" title="statement not covered" >        boolStorage[_key] = _value</span>;
    }
    
    /// @param _key The key for the record
<span class="fstat-no" title="function not covered" >    function setInt(bytes32 _key, int _value) external onlyBitBracketsContrac</span>t {
<span class="cstat-no" title="statement not covered" >        intStorage[_key] = _value</span>;
    }
    /// @param _key The key for the record
    /// @param _values Array of Values
    function setInt8Array(bytes32 _key, uint8[100] _values) external onlyBitBracketsContract {
        int8ArrayStorage[_key] = _values;
    }
    
    /**** Delete Methods ***********/
    
    /// @param _key The key for the record
<span class="fstat-no" title="function not covered" >    function deleteAddress(bytes32 _key) external onlyBitBracketsContrac</span>t {
        delete addressStorage[_key];
    }
&nbsp;
    /// @param _key The key for the record
<span class="fstat-no" title="function not covered" >    function deleteUint(bytes32 _key) external onlyBitBracketsContrac</span>t {
        delete uIntStorage[_key];
    }
&nbsp;
    /// @param _key The key for the record
<span class="fstat-no" title="function not covered" >    function deleteString(bytes32 _key) external onlyBitBracketsContrac</span>t {
        delete stringStorage[_key];
    }
&nbsp;
    /// @param _key The key for the record
<span class="fstat-no" title="function not covered" >    function deleteBytes(bytes32 _key) external onlyBitBracketsContrac</span>t {
        delete bytesStorage[_key];
    }
    
    /// @param _key The key for the record
<span class="fstat-no" title="function not covered" >    function deleteBool(bytes32 _key) external onlyBitBracketsContrac</span>t {
        delete boolStorage[_key];
    }
    
    /// @param _key The key for the record
<span class="fstat-no" title="function not covered" >    function deleteInt(bytes32 _key) external onlyBitBracketsContrac</span>t {
        delete intStorage[_key];
    }
&nbsp;
    /// @param _key The key for the record
<span class="fstat-no" title="function not covered" >    function deleteInt8Array(bytes32 _key)  external onlyBitBracketsContrac</span>t {
        delete int8ArrayStorage[_key];
    }
}</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Thu Mar 22 2018 18:23:42 GMT-0600 (CST)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
